{"ast":null,"code":"import _regeneratorRuntime from\"/home/itamar/Alura---Imers-o-React---Desafio-01/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/itamar/Alura---Imers-o-React---Desafio-01/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/itamar/Alura---Imers-o-React---Desafio-01/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itamar/Alura---Imers-o-React---Desafio-01/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory}from'react-router-dom';import DefaultPage from'../../../components/Layout';import FormField from'../../../components/Form';import{FormWrapper,TitleWrapper,FormFieldWrapper,ButtonStyle,LinkStyle,LinkWrapper,SpanStyle}from'./styles';import useForm from'../../../Hooks/useForm';import CategoriesRepository from'../../../repositories/categories';import{ValidateCat}from'../../../components/Form/validations';function CadastroCategorias(){var _useForm=useForm({name:'',description:'',color:'',url:''}),values=_useForm.values,OnChangeHandler=_useForm.OnChangeHandler,ClearForm=_useForm.ClearForm;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var history=useHistory();var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];function validateValues(Values){setErrors(ValidateCat(Values));}useEffect(function(){var url=window.location.hostname.includes('localhost')?'http://localhost:8080/categorias':'https://.herokuapp.com/categorias';fetch(url).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response.json();case 2:resp=_context.sent;setCategory(_toConsumableArray(resp));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[]);useEffect(function(){validateValues(values);},[values]);return/*#__PURE__*/React.createElement(DefaultPage,null,/*#__PURE__*/React.createElement(TitleWrapper,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Cadastro da Categoria:\",values.name)),/*#__PURE__*/React.createElement(FormWrapper,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:function HandleForm(e){e.preventDefault();if(errors.name||errors.description){alert('Formulário preenchido incorretamente.');}else{CategoriesRepository.create({name:values.name,link_extra:{description:values.description,url:values.url},color:values.color}).then(function(){history.push('/');});setCategory([].concat(_toConsumableArray(category),[values]));ClearForm();}}},/*#__PURE__*/React.createElement(FormFieldWrapper,null,/*#__PURE__*/React.createElement(FormField,{label:\"Nome da Categoria\",value:values.name,type:\"text\",name:\"name\",onChange:OnChangeHandler}),errors.name&&/*#__PURE__*/React.createElement(SpanStyle,null,errors.name)),/*#__PURE__*/React.createElement(FormFieldWrapper,null,/*#__PURE__*/React.createElement(FormField,{label:\"Descri\\xE7\\xE3o da Categoria\",value:values.description,type:\"text\",name:\"description\",onChange:OnChangeHandler}),errors.description&&/*#__PURE__*/React.createElement(SpanStyle,null,errors.description)),/*#__PURE__*/React.createElement(FormFieldWrapper,null,/*#__PURE__*/React.createElement(FormField,{label:\"Cor da Categoria\",value:values.color,type:\"color\",name:\"color\",onChange:OnChangeHandler})),/*#__PURE__*/React.createElement(FormFieldWrapper,null,/*#__PURE__*/React.createElement(FormField,{label:\"Url da Categoria (N\\xE3o obrigat\\xF3rio)\",value:values.url,type:\"url\",name:\"url\",onChange:OnChangeHandler})),/*#__PURE__*/React.createElement(ButtonStyle,null,\"Cadastrar\")),/*#__PURE__*/React.createElement(\"ul\",null,category.map(function(categories){return/*#__PURE__*/React.createElement(\"li\",{key:\"\".concat(categories.name)},categories.name);}))),/*#__PURE__*/React.createElement(LinkWrapper,null,/*#__PURE__*/React.createElement(LinkStyle,{as:Link,to:\"/\"},\"Voltar \\xE0 Home\"),/*#__PURE__*/React.createElement(LinkStyle,{as:Link,to:\"/cadastro/pokemon\"},\"Cadastrar Pok\\xE9mons\")));}export default CadastroCategorias;","map":{"version":3,"sources":["/home/itamar/Alura---Imers-o-React---Desafio-01/src/Pages/Register/Categories/index.js"],"names":["React","useState","useEffect","Link","useHistory","DefaultPage","FormField","FormWrapper","TitleWrapper","FormFieldWrapper","ButtonStyle","LinkStyle","LinkWrapper","SpanStyle","useForm","CategoriesRepository","ValidateCat","CadastroCategorias","name","description","color","url","values","OnChangeHandler","ClearForm","category","setCategory","history","errors","setErrors","validateValues","Values","window","location","hostname","includes","fetch","then","response","json","resp","HandleForm","e","preventDefault","alert","create","link_extra","push","map","categories"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport DefaultPage from '../../../components/Layout';\nimport FormField from '../../../components/Form';\nimport {\n\tFormWrapper, TitleWrapper, FormFieldWrapper, ButtonStyle, LinkStyle, LinkWrapper, SpanStyle,\n} from './styles';\nimport useForm from '../../../Hooks/useForm';\nimport CategoriesRepository from '../../../repositories/categories';\nimport { ValidateCat } from '../../../components/Form/validations';\n\nfunction CadastroCategorias() {\n\tconst { values, OnChangeHandler, ClearForm } = useForm({\n\t\tname: '',\n\t\tdescription: '',\n\t\tcolor: '',\n\t\turl: '',\n\t});\n\tconst [category, setCategory] = useState([]);\n\tconst history = useHistory();\n\n\tconst [errors, setErrors] = useState({});\n\n\tfunction validateValues(Values) {\n\t\tsetErrors(ValidateCat(Values));\n\t}\n\n\tuseEffect(() => {\n\t\tconst url = window.location.hostname.includes('localhost')\n\t\t\t? 'http://localhost:8080/categorias'\n\t\t\t: 'https://.herokuapp.com/categorias';\n\n\t\tfetch(url).then(async (response) => {\n\t\t\tconst resp = await response.json();\n\n\t\t\tsetCategory([\n\t\t\t\t...resp,\n\n\t\t\t]);\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tvalidateValues(values);\n\t}, [values]);\n\n\treturn (\n\t\t<DefaultPage>\n\t\t\t<TitleWrapper>\n\t\t\t\t<h1>\n\t\t\t\t\tCadastro da Categoria:\n\t\t\t\t\t{values.name}\n\n\t\t\t\t</h1>\n\n\t\t\t</TitleWrapper>\n\n\t\t\t<FormWrapper>\n\n\t\t\t\t<form onSubmit={function HandleForm(e) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif (errors.name || errors.description) {\n\t\t\t\t\t\talert('Formulário preenchido incorretamente.');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tCategoriesRepository.create({\n\t\t\t\t\t\t\tname: values.name,\n\t\t\t\t\t\t\tlink_extra: {\n\t\t\t\t\t\t\t\tdescription: values.description,\n\t\t\t\t\t\t\t\turl: values.url,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: values.color,\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\thistory.push('/');\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\tsetCategory([...category, values]);\n\t\n\t\t\t\t\t\tClearForm(); \n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\t>\n\n\t\t\t\t\t<FormFieldWrapper>\n\t\t\t\t\t\t<FormField label=\"Nome da Categoria\" value={values.name} type=\"text\" name=\"name\" onChange={OnChangeHandler} />\n\n\t\t\t\t\t\t{errors.name && <SpanStyle>{errors.name}</SpanStyle>}\n\n\t\t\t\t\t</FormFieldWrapper>\n\n\t\t\t\t\t<FormFieldWrapper>\n\t\t\t\t\t\t<FormField label=\"Descrição da Categoria\" value={values.description} type=\"text\" name=\"description\" onChange={OnChangeHandler} />\n\n\t\t\t\t\t\t{errors.description && <SpanStyle>{errors.description}</SpanStyle>}\n\n\t\t\t\t\t</FormFieldWrapper>\n\n\t\t\t\t\t<FormFieldWrapper>\n\t\t\t\t\t\t<FormField label=\"Cor da Categoria\" value={values.color} type=\"color\" name=\"color\" onChange={OnChangeHandler} />\n\n\t\t\t\t\t</FormFieldWrapper>\n\n\t\t\t\t\t<FormFieldWrapper>\n\t\t\t\t\t\t<FormField label=\"Url da Categoria (Não obrigatório)\" value={values.url} type=\"url\" name=\"url\" onChange={OnChangeHandler} />\n\n\t\t\t\t\t</FormFieldWrapper>\n\n\t\t\t\t\t<ButtonStyle>\n\t\t\t\t\t\tCadastrar\n\n\t\t\t\t\t</ButtonStyle>\n\n\t\t\t\t</form>\n\n\t\t\t\t<ul>\n\t\t\t\t\t{category.map((categories) => (\n\t\t\t\t\t\t<li key={`${categories.name}`}>\n\t\t\t\t\t\t\t{categories.name}\n\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\n\t\t\t</FormWrapper>\n\n\t\t\t<LinkWrapper>\n\t\t\t\t<LinkStyle as={Link} to=\"/\">\n\t\t\t\t\tVoltar à Home\n\n\t\t\t\t</LinkStyle>\n\n\t\t\t\t<LinkStyle as={Link} to=\"/cadastro/pokemon\">\n\t\t\t\t\tCadastrar Pokémons\n\n\t\t\t\t</LinkStyle>\n\n\t\t\t</LinkWrapper>\n\n\t\t</DefaultPage>\n\t);\n}\n\nexport default CadastroCategorias;\n"]},"metadata":{},"sourceType":"module"}