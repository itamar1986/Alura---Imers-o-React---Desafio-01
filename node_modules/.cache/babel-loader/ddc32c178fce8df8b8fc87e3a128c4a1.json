{"ast":null,"code":"import _slicedToArray from\"/home/itamar/Alura---Imers-o-React---Desafio-01/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory}from'react-router-dom';import DefaultPage from'../../../components/Layout';import{FormWrapper,FormFieldWrapper,ButtonStyle,TitleWrapper,LinkStyle,LinkWrapper,SpanStyle}from'./styles';import FormField from'../../../components/Form';import useForm from'../../../Hooks/useForm';import VideosRepository from'../../../repositories/videos';import CategoriesRepository from'../../../repositories/categories';import Validate from'../../../components/Form/validations';function CadastroVideo(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var categoriesTitle=categories.map(function(_ref){var name=_ref.name;return name;});var history=useHistory();var _useForm=useForm({name:'',url:'',category:''}),values=_useForm.values,OnChangeHandler=_useForm.OnChangeHandler,ClearForm=_useForm.ClearForm;var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];function validateValues(Values){setErrors(Validate(Values));}useEffect(function(){CategoriesRepository.getAll().then(function(Categories){setCategories(Categories);});},[]);useEffect(function(){validateValues(values);},[values]);return/*#__PURE__*/React.createElement(DefaultPage,null,/*#__PURE__*/React.createElement(TitleWrapper,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Cadastro de Video\")),/*#__PURE__*/React.createElement(FormWrapper,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:function HandleForm(e){e.preventDefault();if(errors.name||errors.url||errors.category){alert('Formulário preenchido incorretamente');}else{var Category=categories.find(function(selectedCategory){return selectedCategory.name===values.category;});VideosRepository.create({titulo:values.name,url:values.url,categoriaId:Category.id}).then(function(){history.push('/');});ClearForm();}}},/*#__PURE__*/React.createElement(FormFieldWrapper,null,/*#__PURE__*/React.createElement(FormField,{label:\"T\\xEDtulo do V\\xEDdeo\",value:values.name,type:\"text\",name:\"name\",onChange:OnChangeHandler}),errors.name&&/*#__PURE__*/React.createElement(SpanStyle,null,errors.name)),/*#__PURE__*/React.createElement(FormFieldWrapper,null,/*#__PURE__*/React.createElement(FormField,{label:\"URL\",value:values.url,type:\"url\",name:\"url\",onChange:OnChangeHandler}),errors.url&&/*#__PURE__*/React.createElement(SpanStyle,null,errors.url)),/*#__PURE__*/React.createElement(FormFieldWrapper,null,/*#__PURE__*/React.createElement(FormField,{label:\"Categoria do V\\xEDdeo\",value:values.category,type:\"text\",name:\"category\",onChange:OnChangeHandler,suggestions:categoriesTitle}),errors.category&&/*#__PURE__*/React.createElement(SpanStyle,null,errors.category)),/*#__PURE__*/React.createElement(ButtonStyle,null,\"Cadastrar\"))),/*#__PURE__*/React.createElement(LinkWrapper,null,/*#__PURE__*/React.createElement(LinkStyle,{as:Link,to:\"/cadastro/categoria\"},\"Cadastrar Categorias\")));}export default CadastroVideo;","map":{"version":3,"sources":["/home/itamar/Alura---Imers-o-React---Desafio-01/src/Pages/Register/Videos/index.js"],"names":["React","useState","useEffect","Link","useHistory","DefaultPage","FormWrapper","FormFieldWrapper","ButtonStyle","TitleWrapper","LinkStyle","LinkWrapper","SpanStyle","FormField","useForm","VideosRepository","CategoriesRepository","Validate","CadastroVideo","categories","setCategories","categoriesTitle","map","name","history","url","category","values","OnChangeHandler","ClearForm","errors","setErrors","validateValues","Values","getAll","then","Categories","HandleForm","e","preventDefault","alert","Category","find","selectedCategory","create","titulo","categoriaId","id","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport DefaultPage from '../../../components/Layout';\nimport { \n\tFormWrapper, FormFieldWrapper, ButtonStyle, TitleWrapper, LinkStyle, LinkWrapper, SpanStyle,\n} from './styles';\nimport FormField from '../../../components/Form';\nimport useForm from '../../../Hooks/useForm';\nimport VideosRepository from '../../../repositories/videos';\nimport CategoriesRepository from '../../../repositories/categories';\nimport Validate from '../../../components/Form/validations';\n\nfunction CadastroVideo() {\n\tconst [categories, setCategories] = useState([]);\n\tconst categoriesTitle = categories.map(({ name }) => name);\n\tconst history = useHistory();\n\tconst { values, OnChangeHandler, ClearForm } = useForm({\n\t\tname: '',\n\t\turl: '',\n\t\tcategory: '',\n\t});\n\tconst [errors, setErrors] = useState({});\n\n\tfunction validateValues(Values) {\n\t\tsetErrors(Validate(Values));\n\t}\n\n\tuseEffect(() => {\n\t\tCategoriesRepository.getAll().then((Categories) => {\n\t\t\tsetCategories(Categories);\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tvalidateValues(values);\n\t}, [values]);\n\n\treturn (\n\t\t<DefaultPage>\n\t\t\t<TitleWrapper>\n\t\t\t\t<h1>Cadastro de Video</h1>\n\n\t\t\t</TitleWrapper>\n\n\t\t\t<FormWrapper>\n\n\t\t\t\t<form onSubmit={function HandleForm(e) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif (errors.name || errors.url || errors.category) {\n\t\t\t\t\t\talert('Formulário preenchido incorretamente');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst Category = categories\n\t\t\t\t\t\t\t.find((selectedCategory) => selectedCategory.name === values.category);\n\t\n\t\t\t\t\t\tVideosRepository.create({\n\t\t\t\t\t\t\ttitulo: values.name,\n\t\t\t\t\t\t\turl: values.url,\n\t\t\t\t\t\t\tcategoriaId: Category.id,\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\thistory.push('/');\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\tClearForm(); \n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\t>\n\n\t\t\t\t\t<FormFieldWrapper>\n\t\t\t\t\t\t<FormField label=\"Título do Vídeo\" value={values.name} type=\"text\" name=\"name\" onChange={OnChangeHandler} />\n\n\t\t\t\t\t\t{errors.name && <SpanStyle>{errors.name}</SpanStyle>}\n\n\t\t\t\t\t</FormFieldWrapper>\n\n\t\t\t\t\t<FormFieldWrapper>\n\t\t\t\t\t\t<FormField label=\"URL\" value={values.url} type=\"url\" name=\"url\" onChange={OnChangeHandler} />\n\t\t\t\t\t\t\n\t\t\t\t\t\t{errors.url && <SpanStyle>{errors.url}</SpanStyle>}\n\t\t\t\t\t</FormFieldWrapper>\n\n\t\t\t\t\t<FormFieldWrapper>\n\t\t\t\t\t\t<FormField \n\t\t\t\t\t\t\tlabel=\"Categoria do Vídeo\" \n\t\t\t\t\t\t\tvalue={values.category} \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tname=\"category\"\n\t\t\t\t\t\t\tonChange={OnChangeHandler}\n\t\t\t\t\t\t\tsuggestions={categoriesTitle} \n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{errors.category && <SpanStyle>{errors.category}</SpanStyle>}\n\n\t\t\t\t\t</FormFieldWrapper>\n\n\t\t\t\t\t<ButtonStyle>\n\t\t\t\t\t\tCadastrar\n\n\t\t\t\t\t</ButtonStyle>\n\t\t\t\t\n\t\t\t\t</form>\n\t\t\t\n\t\t\t</FormWrapper>\n\n\t\t\t<LinkWrapper>\n\t\t\t\t<LinkStyle as={Link} to=\"/cadastro/categoria\">\n\t\t\t\t\tCadastrar Categorias\n\t\t\t\t</LinkStyle>\n\t\t\t</LinkWrapper>\n\n\t\t</DefaultPage>\n\t);\n}\n\nexport default CadastroVideo;\n"]},"metadata":{},"sourceType":"module"}